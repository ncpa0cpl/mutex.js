var p=Object.defineProperty;var q=t=>p(t,"__esModule",{value:!0});var w=(t,e)=>{q(t);for(var s in e)p(t,s,{get:e[s],enumerable:!0})};var i=(t,e,s)=>new Promise((h,c)=>{var _=r=>{try{o(s.next(r))}catch(n){c(n)}},l=r=>{try{o(s.throw(r))}catch(n){c(n)}},o=r=>r.done?h(r.value):Promise.resolve(r.value).then(_,l);o((s=s.apply(t,e)).next())});w(exports,{Mutex:()=>a,default:()=>x});var u=class{constructor(){this.open=()=>{};this._awaiter=new Promise(e=>{this.open=e})}wait(){return i(this,null,function*(){return yield this._awaiter})}};var a=class{constructor(){this._requests=[]}_nextRequest(){return i(this,null,function*(){var e;(e=this._requests[0])==null||e.open()})}acquire(){return i(this,null,function*(){let e=new u;this._requests.push(e),this._requests.length===1&&this._nextRequest(),yield e.wait()})}release(){this._requests.shift(),this._nextRequest()}};var x=a;
